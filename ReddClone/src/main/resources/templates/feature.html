<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>ReddClone Feature</title>
<script th:replace="fragments/header :: headerElement"></script>
</head>
<body>
	<div th:replace="fragments/header :: header"></div>
	<div class="container">
		<div class="row">
			<div class="col-12 col-sm-8">
				<h1>New Feature</h1>
			</div>
			<div class="col-12 col-sm-4">
				<span class="badge badge-secondary" th:text="${feature.status}"
					style="font-size: 1.2em; margin-top: 0.5em;"></span>
			</div>
		</div>

		<form action="" method="post" class="mt-3">
			<input type="hidden" th:name="${_csrf.parameterName}"
				th:value="${_csrf.token}" /> <input type="hidden"
				th:field="${feature.id}" /> <input type="hidden"
				th:field="${feature.product}" /> <input type="hidden"
				th:field="${feature.status}" />

			<div class="form-group">
				<label for="title">Title:</label> <input type="text"
					class="form-control" th:field="${feature.title}"
					th:attrappend="disabled=${user.id == feature.user.id ? null : 'disabled'}" />
			</div>
			<div>
				<label for="description">Description:</label>
				<textarea th:field="${feature.description}" class="form-control"
					th:attrappend="disabled=${user.id == feature.user.id ? null : 'disabled'}">				
<!-- 					<input type="text" class="form-control" th:field="${feature.description}" /> -->
				</textarea>
			</div>
			<div th:if="${user.id == feature.user.id}">
				<button type="submit" class="btn btn-primary mt-3">Save</button>
			</div>
		</form>

		<div class="mt-3">
			<h2>Comments</h2>
			<form action="">
				<div class="form-group">
					<label for="exampleFormControlTextarea1">Leave a comment below</label>
					<textarea class="form-control" id="exampleFormControlTextarea1"
						rows="3"></textarea>
				</div>			
			</form>
			<div th:each="comment : ${comments}">
				<span th:if="${comment.comment == null}" th:text="${comment.text}"></span>
				<div th:each="commentLevel1 : ${comment.comments}" class="ml-3">
					<span th:text="${commentLevel1.text}"></span>
					<div th:each="commentLevel2 : ${commentLevel1.comments}" class="ml-3">
					<span th:text="${commentLevel2.text}"></span>
				</div>
				</div>
			</div>
		</div>

	</div>
	<!-- .container  -->

</body>
</html>